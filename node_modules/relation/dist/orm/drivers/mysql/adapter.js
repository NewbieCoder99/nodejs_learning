'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _connection = require('./connection');

var _connection2 = _interopRequireDefault(_connection);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  select: function select(_ref) {
    var _select = _ref.select,
        table = _ref.table,
        where = _ref.where,
        limit = _ref.limit;

    return new Promise(function (resolve, reject) {
      _connection2.default.query('SELECT ' + (_select ? _select : '*') + ' FROM ' + table + (where ? ' WHERE ' + _connection2.default.escape(where) : '') + (limit ? ' LIMIT ' + _connection2.default.escape(limit) : ''), function (error, results) {
        if (error) return reject(error);
        resolve(limit === 1 ? results[0] : results);
      });
    });
  },
  create: function create(_ref2) {
    var table = _ref2.table,
        data = _ref2.data;

    return new Promise(function (resolve, reject) {
      _connection2.default.query('INSERT INTO ' + table + ' SET ?', data, function (error, result) {
        if (error) return reject(error);
        resolve(_extends({
          id: result.insertId
        }, data));
      });
    });
  }
};